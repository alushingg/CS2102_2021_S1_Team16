<!DOCTYPE html>
<html>
<head>
    <!-- Page Title -->
    <%- include('./components/htmlHead'); %>
    <link rel='stylesheet' href='/css/bid.css' />
</head>

<body>

<header>
    <%- include('./components/header'); %>
</header>

<div class="content">
    <div class="card" id="left-panel">
        <h1>Care Taker Profile</h1>
        <p>Username: <%= data[0].username %></p>
        <p>Name: <%= data[0].name %></p>
        <p>Phone number: <%= data[0].phone_number %></p>
        <p>Area: <%= data[0].area %></p>
        <p>Job type: <%= data[0].job_type %></p>
        <% if (!data[0].rating) { %>
        <p>Average rating: -</p>
        <% } else { %>
        <p>Average rating: <%= data[0].rating %> / 5</p>
        <% } %>
        <hr>
        <h1>Review</h1>
        <% if (dataR.length == 0) { %>
        <p>No review yet.</p>
        <% } else { %>
        <table>
            <thead>
            <tr>
                <th scope="col">Reviewer</th>
                <th scope="col">Review</th>
            </tr>
            </thead>
            <tbody>
            <% for(var i=0; i<dataR.length; i++) { %>
            <tr>
                <td><%= dataR[i].username %></td>
                <td><%= dataR[i].review %></td>
            </tr>
            <% } %>
            </tbody>
        </table>
        <% } %>
    </div>

    <div class="card" id="right-panel">
        <h1><%= title%> for <%= ctuname%></h1>
        <p>Duration:</p>
        <div id="date">
            <div id="start-date"></div>
            <div><p>to</p></div>
            <div id="end-date"></div>
        </div>
        <br>
        <hr>

        <p>Daily price: $<%=  price[0].price %></p>
        <p>Total price: $<%=  price[0].total_price %></p>
        
        <br>
        <hr>
        <% if (data.length) { %>
        <form method="POST" action="/bid/<%= ctuname%>">
            <div class="form-group">
                <p>Pet name: </p>
                <% if (pet.length) { %>
                <select name="petname" id="petname">
                    <% for(var i = 0; i < pet.length; i++) { %>
                    <option value="<%= pet[i].name%>"><%= pet[i].name%></option>
                    <% } %>
                </select>
                <% } else { %>
                    <p>You don't have a pet yet.</p>
                <% } %>
            </div>
            
            <% if (pet.length) { %>
            <div class="form-group">
                <p>Transfer method: </p>
                <p>
                    <label><input type="radio" name="transfer" value="Pick up" checked/> Pick up</label><br>
                    <label><input type="radio" name="transfer" value="Deliver" /> Deliver</label><br>
                    <label><input type="radio" name="transfer" value="PCS" /> PCS</label><br>
                </p>
            </div>
            
            <br>
            <hr>
            <div class="form-group">
                <p>Payment mode: </p>
                <p>
                    <label><input type="radio" name="payment" value="Card" checked/> Credit Card</label><br>
                    <label><input type="radio" name="payment" value="Cash" /> Cash</label><br>
                </p>
            </div>
            <button type="submit" class="button">Submit</button>
            <% } %>
        </form>
        <% } else { %>
            <p>You do not have any <%= type%>. </p>
            <button onclick="window.location.href='/availability'" class="button">Back</button>
        <% } %>
    </div>
</div>

<footer>
    <%- include('./components/footer'); %>
</footer>
<script>
    function format(str) {
        var date = new Date(str);
        return date.toLocaleDateString('en-SG');
    }
    document.getElementById("start-date").innerHTML = format('<%= start%>');
    document.getElementById("end-date").innerHTML = format('<%= end%>');
</script>
</body>
</html>
